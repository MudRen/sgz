TODO: make an interface to this crap.  Put it in a file.
combat-torch also needs serious help.
